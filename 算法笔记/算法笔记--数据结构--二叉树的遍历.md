---
title: ç®—æ³•ç¬”è®°--æ•°æ®ç»“æ„--äºŒå‰æ ‘çš„éå†
date: 2020-04-09 9:30:00
categories: ç®—æ³•ä¸æ•°æ®ç»“æ„
tags: æ•°æ®ç»“æ„
id: Gqq
---

# äºŒå‰æ ‘çš„éå†

> äºŒå‰æ ‘çš„éå†æ˜¯æŒ‡é€šè¿‡ä¸€å®šé¡ºåºè®¿é—®äºŒå‰æ ‘çš„æ‰€æœ‰ç»“ç‚¹

**éå†æ–¹æ³•**ï¼š

- 1ï¸âƒ£å…ˆåºéå†
- 2ï¸âƒ£ä¸­åºéå†
- 3ï¸âƒ£ååºéå†
- 4ï¸âƒ£å±‚æ¬¡éå†

**æ·±åº¦ä¼˜å…ˆç®—æ³•**ï¼šå…ˆåºã€ä¸­åºã€ååºéå†

**å¹¿åº¦ä¼˜å…ˆç®—æ³•**ï¼šå±‚æ¬¡éå†

å¯¹äºå‰ä¸‰ç§éå†ï¼š

- æ— è®ºå“ªç§éå†ï¼Œ**å·¦å­æ ‘ä¸€å®šå…ˆäºå³å­æ ‘**
- æ‰€è°“**å…ˆä¸­å**æ˜¯å¯¹æ ¹ç»“ç‚¹rootè€Œè¨€çš„
  - å…ˆåºï¼šroot -> å·¦å­æ ‘ -> å³å­æ ‘
  - ä¸­åºï¼šå·¦å­æ ‘ -> root -> å³å­æ ‘
  - ååºï¼šå·¦å­æ ‘ -> å³å­æ ‘ -> root

<!--more-->

# å…ˆåºéå†

![Snipaste_2020-04-09_11-17-05](https://tva3.sinaimg.cn/large/005tpOh1gy1gdnci1tpjyj30a708zjsu.jpg)

é€’å½’è¾¹ç•Œï¼šç©ºæ ‘

é€’å½’å¼ï¼šroot -> å·¦å­æ ‘ -> å³å­æ ‘

```cpp
void preorder(node* root){
    if(root == NULL)
        return;			// ç©ºæ ‘
    printf("%d\n", root->data);
    preorder(root->lchild);		// å·¦å­æ ‘
    preorder(root->rchild);		// å³å­æ ‘
}
```

**æ€§è´¨**

- å¯¹ä¸€æ£µäºŒå‰æ ‘çš„å…ˆåºéå†åºåˆ—ï¼Œåºåˆ—çš„ç¬¬ä¸€ä¸ªä¸€å®šæ˜¯æ ¹ç»“ç‚¹

# ä¸­åºéå†

![Snipaste_2020-04-09_11-21-47](https://tvax2.sinaimg.cn/large/005tpOh1gy1gdncn4rilnj30ah07r3zs.jpg)

é€’å½’è¾¹ç•Œï¼šç©ºæ ‘

é€’å½’å¼ï¼šå·¦å­æ ‘ -> root -> å³å­æ ‘

```cpp
void inorder(node* root){
    if(root == NULL)
        return;					// ç©ºæ ‘
    inorder(root->lchild);	
    printf("%d\n", root->data);
    inorder(root->rchild);
}
```

**æ€§è´¨**

- åªè¦çŸ¥é“æ ¹ç»“ç‚¹ï¼Œå°±å¯ä»¥é€šè¿‡æ ¹ç»“ç‚¹åœ¨ä¸­åºéå†ä¸­çš„ä½ç½®åŒºåˆ†å‡ºå·¦å­æ ‘å’Œå³å­æ ‘

å¦‚ï¼Œä¸Šå›¾çš„ä¸­åºéå†ä¸º**DBEACF**

- Aæ˜¯æ ¹ç»“ç‚¹ï¼Œæ‰€ä»¥DBEæ˜¯å·¦å­æ ‘ç»“ç‚¹ï¼ŒCFæ˜¯å³å­æ ‘ç»“ç‚¹
- Bæ˜¯æ ¹ç»“ç‚¹ï¼Œæ‰€ä»¥Dæ˜¯å·¦å­æ ‘ç»“ç‚¹ï¼ŒEæ˜¯å³å­æ ‘ç»“ç‚¹

**å¦‚æœäº‹å…ˆçŸ¥é“æ˜¯æ ¹ç»“ç‚¹**ï¼šåˆ©ç”¨å…ˆåºéå†

ğŸŸ¢æ‰€ä»¥ï¼Œ***åˆ©ç”¨å…ˆåºéå†å’Œä¸­åºéå†å¯ä»¥ç¡®å®šä¸€é¢—äºŒå‰æ ‘***

# ååºéå†

![Snipaste_2020-04-09_11-31-47](https://tva3.sinaimg.cn/large/005tpOh1gy1gdncx1ob4wj309j07labb.jpg)

é€’å½’è¾¹ç•Œï¼šç©ºæ ‘

é€’å½’å¼ï¼šå·¦å­æ ‘ -> å³å­æ ‘ -> root

```cpp
void postorder(node* root){
    if(root == NULL)
        return;				// ç©ºæ ‘
    postorder(root->lchild);
    postorder(left->rchild);
    printf("%d\n", root->data);
}
```

**æ€§è´¨**

- åºåˆ—çš„æœ€åä¸€ä¸ªä¸€å®šæ˜¯æ ¹ç»“ç‚¹

å¦‚ï¼Œä¸Šå›¾çš„ååºéå†åºåˆ—æ˜¯**DEBFCA**

- Aæ˜¯æ ¹ç»“ç‚¹ï¼ŒAçš„å·¦å­æ ‘æ˜¯BEDï¼Œå®ƒä»¬çš„ååºæ’åˆ—æ˜¯DEBï¼Œæ‰€ä»¥Bæ˜¯å·¦å­æ ‘çš„æ ¹ç»“ç‚¹

ğŸŸ¢æ‰€ä»¥ï¼Œ***åˆ©ç”¨ååºéå†å’Œä¸­åºéå†å¯ä»¥ç¡®å®šä¸€é¢—äºŒå‰æ ‘***

ğŸ‰**æ— è®ºæ˜¯å…ˆåºéå†è¿˜æ˜¯ååºéå†ï¼Œéƒ½å¿…é¡»çŸ¥é“ä¸­åºéå†åºåˆ—æ‰èƒ½å”¯ä¸€åœ°ç¡®å®šä¸€æ£µæ ‘**

# å±‚åºéå†

å±‚åºéå†ï¼šæŒ‰ç…§å±‚æ¬¡çš„é¡ºåºä»æ ¹ç»“ç‚¹å‘ä¸‹é€å±‚è¿›è¡Œéå†ï¼Œä¸”å¯¹åŒä¸€å±‚çš„ç»“ç‚¹ä»å·¦å¾€å³éå†

![Snipaste_2020-04-09_11-42-26](https://tva1.sinaimg.cn/large/005tpOh1gy1gdnd86o0mlj309r06ewf1.jpg)

ä¸Šå›¾çš„éå†åºåˆ—ä¸º**ABCDEF**ï¼Œæ‰€ä»¥äºŒå‰æ ‘çš„å±‚åºéå†å°±ç›¸å½“äºäºŒå‰æ ‘ä»æ ¹ç»“ç‚¹å¼€å§‹çš„**å¹¿åº¦ä¼˜å…ˆæœç´¢**

- 1ï¸âƒ£å°†æ ¹ç»“ç‚¹rootåŠ å…¥é˜Ÿåˆ—q
- 2ï¸âƒ£å–å‡ºé˜Ÿåˆ—é¦–ç»“ç‚¹ï¼Œè®¿é—®å®ƒ
- 3ï¸âƒ£å¦‚æœè¯¥ç»“ç‚¹æœ‰å·¦å­©å­ï¼Œå°†å·¦å­©å­å…¥é˜Ÿ
- 4ï¸âƒ£å¦‚æœè¯¥ç»“ç‚¹æœ‰å³å­©å­ï¼Œå°†å³å­©å­å…¥é˜Ÿ
- 5ï¸âƒ£è¿”å›2ï¸âƒ£ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º

```cpp
void LayerOrder(node* root){
    queue<node*> q;				// æ³¨æ„é˜Ÿåˆ—ç±»å‹
    q.push(root);
    while(!q.empty()){
        node* now = q.front();
        q.pop();
        printf("%d ", now->data);
        if(now->lchild != NULL) q.push(now->lchild);
        if(now->rchild != NULL) q.push(now->rchild);
    }
}
```

æ³¨æ„**é˜Ÿåˆ—ä¸­çš„å…ƒç´ æ˜¯`node*`å‹è€Œä¸æ˜¯nodeå‹**ï¼Œå› ä¸ºé˜Ÿåˆ—ä¸­ä¿å­˜çš„åªæ˜¯åŸå…ƒç´ çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œå› æ­¤å¦‚æœé˜Ÿåˆ—ä¸­ç›´æ¥å­˜æ”¾äº†nodeå‹ï¼Œå½“éœ€è¦ä¿®æ”¹é˜Ÿé¦–å…ƒç´ æ—¶ï¼Œå°±æ— æ³•å¯¹åŸå…ƒç´ è¿›è¡Œä¿®æ”¹ï¼Œè€Œæ”¾`node*`å‹ï¼Œå°±å¯ä»¥é€šè¿‡è®¿é—®åœ°å€å»ä¿®æ”¹åŸå…ƒç´ 

 å¾ˆå¤šé¢˜ç›®è¦æ±‚è®¡ç®—å‡ºæ¯ä¸ªç»“ç‚¹æ‰€å¤„çš„å±‚æ¬¡ï¼Œæ‰€ä»¥è¦å®šä¹‰ç»“æ„ä½“ï¼š

```cpp
struct node {
    int data;		// æ•°æ®åŸŸ
    int layer;		// å±‚æ¬¡
    node* lchild;	// å·¦å­æ ‘
    node* rchild;	// å³å­æ ‘
}
```

åœ¨æ ¹ç»“ç‚¹å…¥é˜Ÿå‰å°±å…ˆä»¤æ ¹ç»“ç‚¹çš„layerä¸º1æ¥è¡¨ç¤ºæ ¹ç»“ç‚¹çš„ç¬¬ä¸€å±‚ï¼Œä¹‹å`now->lchild`å’Œ`now->rchild`å…¥é˜Ÿå‰ï¼ŒæŠŠå®ƒä»¬çš„å±‚å·éƒ½è®°ä¸ºå½“å‰ç»“ç‚¹nowçš„å±‚å·åŠ  1

```cpp
void LayerOrder(node* root){
    queue<node*> q;				// æ³¨æ„é˜Ÿåˆ—æ˜¯å­˜æ”¾åœ°å€
    root->layer = 1;			// æ ¹ç»“ç‚¹çš„å±‚å·ä¸º1
    q.push(root);				// å°†æ ¹ç»“ç‚¹åœ°å€å…¥é˜Ÿ
    while(!q.empty()){
        node* now = q.front();	// å–å‡ºé˜Ÿé¦–å…ƒç´ 
        q.pop();
        printf("%d ", now->data);	// è®¿é—®é˜Ÿé¦–å…ƒç´ 
        if(now->lchild != NULL){	// å·¦å­æ ‘éç©º
            now->lchild->layer = now->layer + 1;	// å·¦å­©å­çš„å±‚å·ä¸ºå½“å‰å±‚åŠ 1
            q.push(now->lchild);
        }
        if(now->rchild != NULL){	// å³å­æ ‘éç©º
            now->rchild->layer = now->layer + 1;	// å³å­©å­çš„å±‚å·ä¸ºå½“å‰å±‚åŠ 1
            q.push(now->rchild);
        }
    }
    
}
```



# é‡å»ºäºŒå‰æ ‘

> ç»™å®šä¸€é¢—äºŒå‰æ ‘çš„å…ˆåºéå†å’Œä¸­åºéå†åºåˆ—ï¼Œé‡å»ºè¿™æ£µäºŒå‰æ ‘

![Snipaste_2020-04-09_14-45-18](https://tvax3.sinaimg.cn/large/005tpOh1gy1gdniigcxzfj30gc05n753.jpg)

å¦‚å›¾ï¼Œå…ˆåºåºåˆ—çš„ç¬¬ä¸€ä¸ªå…ƒç´ $pre_1$æ˜¯å½“å‰äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹ï¼Œç”±ä¸­åºåºåˆ—çš„æ€§è´¨å¯çŸ¥ï¼Œå½“å‰äºŒå‰æ ‘çš„æ ¹ç»“ç‚¹å°†ä¸­åºåºåˆ—åˆ’åˆ†ä¸ºå·¦å­æ ‘å’Œå³å­æ ‘ï¼Œå› æ­¤ï¼Œè¦åšçš„å°±æ˜¯åœ¨ä¸­åºåºåˆ—ä¸­æ‰¾åˆ°æŸä¸ªç»“ç‚¹$in_k$ï¼Œä½¿å¾—`ink == pre1`ï¼Œè¿™æ ·å°±åœ¨ä¸­åºåºåˆ—ä¸­æ‰¾åˆ°äº†æ ¹ç»“ç‚¹ã€‚æ‰€ä»¥å·¦å­æ ‘çš„ç»“ç‚¹ä¸ªæ•°`numLeft = k - 1`ï¼Œè¿™æ ·ï¼Œå·¦å­æ ‘çš„å…ˆåºåŒºé—´å°±æ˜¯`[2, k]`ï¼Œå·¦å­æ ‘çš„ä¸­åºåºåˆ—åŒºé—´æ˜¯`[1, k-1]`ï¼›å³å­æ ‘çš„å…ˆåºåºåˆ—åŒºé—´æ˜¯`[k+1, n]`ï¼Œå³å­æ ‘çš„ä¸­åºåºåˆ—åŒºé—´æ˜¯`[k+1, n]`ï¼Œæ¥ç€åªè¦å¾€å·¦å­æ ‘å’Œå³å­æ ‘è¿›è¡Œé€’å½’æ„å»ºäºŒå‰æ ‘

![Snipaste_2020-04-09_14-55-50](https://tvax3.sinaimg.cn/large/005tpOh1gy1gdniteoin3j30jy061wfj.jpg)

æ¢ç§è¡¨ç¤ºæ–¹æ³•ï¼Œå¦‚æœé€’å½’è¿‡ç¨‹ä¸­å½“å‰å…ˆåºåºåˆ—çš„åŒºé—´æ˜¯`[preL, preR]`ï¼Œä¸­åºåºåˆ—çš„åŒºé—´æ˜¯`[inL, inR]`ï¼Œé‚£ä¹ˆå·¦å­æ ‘çš„ç»“ç‚¹ä¸ªæ•°ä¸º`numLeft = k - inL`ï¼Œè¿™æ ·å·¦å­æ ‘çš„å…ˆåºåºåˆ—åŒºé—´å°±æ˜¯`[preL+1, preL+numLeft]`ï¼Œå·¦å­æ ‘çš„ä¸­åºåºåˆ—åŒºé—´æ˜¯`[inL, k-1]`ï¼Œå³å­æ ‘çš„å…ˆåºåºåˆ—åŒºé—´æ˜¯`[preL+numLeft+1, preR]`ï¼Œå³å­æ ‘çš„ä¸­åºåºåˆ—åŒºé—´æ˜¯`[k+1, inR]`

**é€’å½’è¾¹ç•Œ**ï¼šåªè¦å…ˆåºåºåˆ—çš„é•¿åº¦å°äºç­‰äº0æ—¶ï¼Œå½“å‰äºŒå‰æ ‘å°±ä¸å­˜åœ¨äº†ï¼Œå³ä¸ºé€’å½’è¾¹ç•Œ

```cpp
node* create(int preL,int preR, int inL, int inR){
    if(preL > preR){
        return NULL;	// å…ˆåºåºåˆ—é•¿åº¦å°äºç­‰äº0æ—¶ï¼Œç›´æ¥è¿”å›
    }
    node* root = new node;
    root->data = pre[preL];
    int k;
    for(k = inL; k <= inR; k++){
        if(in[k] == pre[preL]){
            break;
        }
    }
    int numLeft = k - inL;
    
    root->lchild = create(preL + 1, preL + numLeft, inL, k - 1);
    root->rchild = create(preL + numLeft + 1, preR, k + 1ï¼Œ inR);
    return root;
}
```

ä¸Šé¢ä»£ç å°±æ„å»ºå‡ºäº†ä¸€æ£µäºŒå‰æ ‘

**ä¸­åºåºåˆ—å¯ä»¥å’Œå…ˆåºã€ååºã€å±‚åºä¸­çš„ä»»æ„ä¸€ä¸ªæ¥æ„å»ºå”¯ä¸€çš„äºŒå‰æ ‘ï¼Œè€Œåä¸‰è€…ä¸¤ä¸¤æ­é…æˆ–è€…ä¸‰ä¸ªåœ¨ä¸€èµ·éƒ½æ— æ³•æ„å»ºå”¯ä¸€äºŒå‰æ ‘**

## å®ä¾‹[PAT A1020]

**é¢˜ç›®**

```shell
Suppose that all the keys in a binary tree are distinct positive integers. Given the postorder and inorder traversal sequences, you are supposed to output the level order traversal sequence of the corresponding binary tree.
```

**è¾“å…¥æ ¼å¼**

```shell
Each input file contains one test case. For each case, the first line gives a positive integer N (â‰¤30), the total number of nodes in the binary tree. The second line gives the postorder sequence and the third line gives the inorder sequence. All the numbers in a line are separated by a space.
```

**è¾“å‡ºæ ¼å¼**

```shell
For each test case, print in one line the level order traversal sequence of the corresponding binary tree. All the numbers in a line must be separated by exactly one space, and there must be no extra space at the end of the line.
```

**è¾“å…¥æ ·ä¾‹**

```shell
7
2 3 1 5 7 6 4
1 2 3 4 5 6 7
```

**è¾“å‡ºæ ·ä¾‹**

```shell
4 1 6 3 5 7 2
```

**è§£é¢˜æ€è·¯**

![Snipaste_2020-04-09_15-52-03](https://tvax4.sinaimg.cn/large/005tpOh1gy1gdnkg5qammj30le064my9.jpg)

**ä»£ç **

```cpp
#include<cstdio>
#include<queue>
using namespace std;
const int maxn = 32;

struct node{
    int data;
    node* lchild;
    node* rchild;
};

int in[maxn], post[maxn];   // ä¸­åºéå†åºåˆ— å’Œ ååºéå†åºåˆ—
int n;                      // åºåˆ—é•¿åº¦

node* create(int postL, int postR, int inL, int inR){
    if(postL > postR){
        return NULL;
    }
    node* root = new node;
    root->data = post[postR];
    int k;
    for(k = inL; k <= inR; k++){
        if(in[k] == post[postR]){
            break;
        }
    }
    int numLeft = k - 1 - inL + 1;
    root->lchild = create(postL, postL + numLeft - 1, inL, k - 1);
    root->rchild = create(postL + numLeft, postR - 1, k + 1, inR);
    return root;
}

int num = 0;                // ç”¨äºæ§åˆ¶è¾“å‡ºç©ºæ ¼
void BFS(node* root){       // åˆ©ç”¨å¹¿åº¦ä¼˜å…ˆæœç´¢æ¥å®ç°å±‚åºéå†
    queue<node*> q;
    q.push(root);
    while(!q.empty()){
        node* now = q.front();
        q.pop();
        printf("%d", now->data);
        num++;
        if(num < n)printf(" ");
        if(now->lchild != NULL){
            q.push(now->lchild);
        }
        if(now->rchild != NULL){
            q.push(now->rchild);
        }
    }
}

int main(){
    scanf("%d", &n);
    for(int i = 0; i < n; i++){
        scanf("%d", &post[i]);
    }
    for(int i = 0; i < n; i++){
        scanf("%d", &in[i]);
    }
    node* root = create(0, n - 1, 0, n - 1);
    BFS(root);
    return 0;
}
```

