---
title: ç®—æ³•ç¬”è®°--æ•°æ®ç»“æ„--å›¾
date: 2020-04-17 10:00:00
categories: ç®—æ³•ä¸æ•°æ®ç»“æ„
tags: æ•°æ®ç»“æ„
id: Gqq
---

# å›¾çš„å®šä¹‰å’Œç›¸å…³æœ¯è¯­

![Snipaste_2020-04-17_10-05-43](https://tva2.sinaimg.cn/large/005tpOh1gy1gdwjelwnwtj309d047mxf.jpg)

å›¾ç”±å®šç‚¹(Vertex)å’Œè¾¹(Edge)ç»„æˆï¼Œæ¯æ¡è¾¹çš„ä¸¤ç«¯éƒ½å¿…é¡»æ˜¯å›¾çš„ä¸¤ä¸ªé¡¶ç‚¹(å¯ä»¥æ˜¯ç›¸åŒçš„é¡¶ç‚¹)ï¼Œè®°ä¸ºG(V,E)è¡¨ç¤ºå›¾Gçš„é¡¶ç‚¹é›†ä¸ºVï¼Œè¾¹é›†ä¸ºEã€‚<!--more-->

**å›¾çš„ä¸€äº›æ¦‚å¿µ**ï¼š

- æœ‰å‘å›¾ï¼šæ‰€æœ‰è¾¹æœ‰æ–¹å‘ï¼Œç¡®å®šäº†é¡¶ç‚¹åˆ°é¡¶ç‚¹çš„ä¸€ä¸ªæŒ‡å‘
- æ— å‘å›¾ï¼šæ‰€æœ‰è¾¹éƒ½æ˜¯åŒå‘çš„ï¼Œå³æ— å‘è¾¹æ‰€è¿æ¥çš„ä¸¤ä¸ªé¡¶ç‚¹å¯ä»¥ç›¸äº’åˆ°è¾¾

![Snipaste_2020-04-17_10-11-55](https://tva3.sinaimg.cn/large/005tpOh1gy1gdwjkgbdvmj30g6057wfd.jpg)

- é¡¶ç‚¹çš„åº¦ï¼šå’Œè¯¥é¡¶ç‚¹ç›¸è¿çš„è¾¹çš„æ¡æ•°
  - å¯¹äºæœ‰å‘å›¾æ¥è¯´
    - å…¥åº¦ï¼šé¡¶ç‚¹çš„å…¥è¾¹æ¡æ•°
    - å‡ºåº¦ï¼šé¡¶ç‚¹çš„å‡ºè¾¹æ¡æ•°
- æƒå€¼ï¼šé‡åŒ–çš„å±æ€§
  - ç‚¹æƒï¼šé¡¶ç‚¹çš„æƒå€¼
  - è¾¹æƒï¼šè¾¹çš„æƒå€¼

# å›¾çš„å­˜å‚¨

## é‚»æ¥çŸ©é˜µ

è®¾å›¾`G(V,E)`çš„é¡¶ç‚¹æ ‡å·ä¸º0, 1, ..., N - 1ï¼Œé‚£ä¹ˆå¯ä»¥ä»¤`äºŒç»´æ•°ç»„G[N][N]`çš„ä¸¤ç»´åˆ†åˆ«è¡¨ç¤ºå›¾çš„é¡¶ç‚¹æ ‡å·ï¼Œå¦‚æœ`G[i][j] = 1`ï¼Œè¯´æ˜é¡¶ç‚¹iå’Œé¡¶ç‚¹jä¹‹é—´æœ‰è¾¹ï¼Œå¦‚æœ`G[i][j] = 0`ï¼Œè¯´æ˜é¡¶ç‚¹iå’Œé¡¶ç‚¹jä¹‹é—´ä¸å­˜åœ¨è¾¹ï¼Œè¿™æ ·çš„äºŒç»´æ•°ç»„`G[][]`ç§°ä¸º`é‚»æ¥çŸ©é˜µ`

å¦‚æœå­˜åœ¨è¾¹æƒï¼Œåˆ™`G[i][j]`å­˜å‚¨è¾¹æƒï¼Œä¸å­˜åœ¨çš„è¾¹å¯ä»¥è®¾è¾¹æƒä¸º0ï¼Œ-1æˆ–è€…ä¸€ä¸ªå¾ˆå¤§çš„æ•°

![Snipaste_2020-04-17_10-19-49](https://tvax1.sinaimg.cn/large/005tpOh1gy1gdwjsmt70wj30fg05ymxt.jpg)

å¯¹äºæ— å‘å›¾æ¥è¯´ï¼Œå…¶**é‚»æ¥çŸ©é˜µæ˜¯ä¸€ä¸ªå¯¹ç§°çŸ©é˜µ**

å¦‚æœé¡¶ç‚¹æ•°å¾ˆå¤§ï¼Œå¼€ä¸€ä¸ªäºŒç»´æ•°ç»„å¯èƒ½è¶…è¿‡é¢˜ç›®å†…å­˜é™åˆ¶ã€‚

## é‚»æ¥è¡¨

è®¾å›¾`G(V,E)`çš„é¡¶ç‚¹æ ‡å·ä¸º0, 1, ..., N - 1ï¼Œæ¯ä¸ªé¡¶ç‚¹å¯èƒ½æœ‰è‹¥å¹²æ¡å‡ºè¾¹ï¼Œå¦‚æœæŠŠåŒä¸€ä¸ªé¡¶ç‚¹çš„æ‰€æœ‰**å‡ºè¾¹**æ”¾åœ¨ä¸€ä¸ªåˆ—è¡¨é‡Œï¼Œé‚£ä¹ˆNä¸ªé¡¶ç‚¹å°±æœ‰Nä¸ªåˆ—è¡¨ï¼Œè¿™Nä¸ªåˆ—è¡¨ç§°ä¸ºå›¾çš„**é‚»æ¥è¡¨**ï¼Œè®°ä¸º`Adj[N]`ï¼Œå…¶ä¸­`Adj[i]`å­˜æ”¾é¡¶ç‚¹içš„æ‰€æœ‰å‡ºè¾¹ç»„æˆçš„åˆ—è¡¨ï¼Œè¿™æ ·`Adj[0], Adj[1],.....ï¼Œ Adj[N-1]`å°±åˆ†åˆ«æ˜¯ä¸€ä¸ªåˆ—è¡¨

![Snipaste_2020-04-17_10-25-07](https://tvax1.sinaimg.cn/large/005tpOh1gy1gdwjy7e2u3j30ho05r0u1.jpg)

é‚»æ¥è¡¨å¯ä»¥åˆ©ç”¨**é“¾è¡¨æ¥å®ç°**ï¼Œä¸ºäº†ç®€å•ï¼Œå¯ä»¥ä½¿ç”¨**å‘é‡Vector**æ•°ç»„æ¥å®ç°

```cpp
vector<int> Adj[N];		// å‘é‡æ•°ç»„
Adj[1].push_bach(3);
```

<img src="https://tvax3.sinaimg.cn/large/005tpOh1gy1gdwk13hwbrj306h06amxf.jpg" alt="Snipaste_2020-04-17_10-27-57" style="zoom:80%;" />

**å¦‚æœéœ€è¦å­˜å‚¨ç¼–å·å’Œè¾¹æƒ**ï¼Œåˆ™å¯ä»¥æœ‰ä»¥ä¸‹ç»“æ„ä½“ 

```cpp
struct node{
    int v;		// è¾¹çš„ç»ˆç‚¹ç¼–å·
    int w;		// è¾¹æƒ
}

vector<node> Adj[N];
node temp;
temp.v = 3;
temp.w = 4;
Adj[1].push_back[temp];
```

æ›´å¿«çš„åšæ³•å¯ä»¥æ„å»ºç»“æ„ä½“çš„æ„é€ å‡½æ•°

```cpp
struct node{
    int v;
    int w;
    node(int _v, int _w):v(_v),w(_w){}
}

vector<node> Adj[N];
Adj[1].push_back(node(3, 4));
```

# å›¾çš„éå†

## æ·±åº¦ä¼˜å…ˆéå†DFS

### DFSéå†å›¾

![Snipaste_2020-04-17_11-00-20](https://tva1.sinaimg.cn/large/005tpOh1gy1gdwkzh0loej30n206taeh.jpg)

![Snipaste_2020-04-17_11-00-36](https://tvax2.sinaimg.cn/large/005tpOh1gy1gdwl036vftj30mn0phdpv.jpg)

![Snipaste_2020-04-17_11-00-48](https://tvax4.sinaimg.cn/large/005tpOh1gy1gdwl1b0nvpj30nj084whv.jpg)

![Snipaste_2020-04-17_11-00-57](https://tva4.sinaimg.cn/large/005tpOh1gy1gdwl1g5ws6j30n702iabm.jpg)

### DFSçš„å…·ä½“å®ç°

- åœ¨**æ— å‘å›¾**ä¸­ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹ä¹‹é—´å¯ä»¥ç›¸äº’åˆ°è¾¾ï¼ˆå¯ä»¥æ˜¯é€šè¿‡ä¸€å®šè·¯å¾„é—´æ¥åˆ°è¾¾ï¼‰ï¼Œé‚£ä¹ˆå°±ç§°è¿™ä¸¤ä¸ªé¡¶ç‚¹è¿é€šã€‚å¦‚æœå›¾Gï¼ˆvï¼ŒEï¼‰çš„ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹éƒ½è¿é€šï¼Œåˆ™ç§°å›¾Gä¸º**è¿é€šå›¾**ï¼›å¦åˆ™ï¼Œç§°å›¾Gä¸º**éè¿é€šå›¾**ï¼Œä¸”ç§°å…¶ä¸­çš„æå¤§è¿é€šå­å›¾ä¸º**è¿é€šåˆ†é‡**
- åœ¨**æœ‰å‘å›¾**ä¸­ï¼Œå¦‚æœä¸¤ä¸ªé¡¶ç‚¹å¯ä»¥å„è‡ªé€šè¿‡ä¸€æ¡æœ‰å‘è·¯å¾„åˆ°è¾¾å¦ä¸€ä¸ªé¡¶ç‚¹å°±ç§°è¿™ä¸¤ä¸ªé¡¶ç‚¹å¼ºè¿é€šã€‚å¦‚æœå›¾Gï¼ˆV,Eï¼‰çš„ä»»æ„ä¸¤ä¸ªé¡¶ç‚¹éƒ½å¼ºè¿é€šï¼Œåˆ™ç§°å›¾Gä¸º**å¼ºè¿é€šå›¾**ï¼›å¦åˆ™ï¼Œç§°å›¾Gä¸º**éå¼ºè¿é€šå›¾**ï¼Œä¸”ç§°å…¶ä¸­çš„æå¤§å¼ºè¿é€šå­å›¾ä¸º**å¼ºè¿é€šåˆ†é‡**

![Snipaste_2020-04-17_11-08-28](https://tvax4.sinaimg.cn/large/005tpOh1gy1gdwl78r4mlj30o408376m.jpg)

- **è¿é€šåˆ†é‡å’Œå¼ºè¿é€šåˆ†é‡éƒ½ç§°ä¸ºè¿é€šå—**

- **å¦‚æœè¦éå†æ•´ä¸ªå›¾ï¼Œå°±éœ€è¦å¯¹æ‰€æœ‰è¿é€šå—åˆ†åˆ«è¿›è¡Œéå†**ã€‚æ‰€ä»¥DFSéå†å›¾çš„åŸºæœ¬æ€è·¯å°±æ˜¯å°†ç»è¿‡çš„é¡¶ç‚¹è®¾ç½®ä¸ºå·²è®¿é—®ï¼Œåœ¨ä¸‹æ¬¡é€’å½’ç¢°åˆ°è¿™ä¸ªé¡¶ç‚¹æ—¶å°±ä¸å†å»å¤„ç†ï¼Œç›´åˆ°æ•´ä¸ªå›¾çš„é¡¶ç‚¹éƒ½è¢«æ ‡è®°ä¸ºå·²è®¿é—®

```cpp
const int MAXV = 1000;	// æœ€å¤§é¡¶ç‚¹æ•°
const int INF = 1000000000; // å°†INFè®¾ä¸ºä¸€ä¸ªå¾ˆå¤§å€¼
```

ğŸ…°**é‚»æ¥çŸ©é˜µç‰ˆæœ¬**

```cpp
int n, G[MAXV][MAXV];		// nä¸ºé¡¶ç‚¹æ•°ï¼ŒMAXVä¸ºæœ€å¤§é¡¶ç‚¹æ•°
bool vis[MAXV] = {false};	// è®¾å®šæ£€æŸ¥æ˜¯å¦å·²ç»éå†çš„æ•°ç»„

void DFS(int u, int depth){	// uä¸ºå½“å‰è®¿é—®ç»“ç‚¹ï¼Œdepthä¸ºæ·±åº¦
    vis[u] = true;			// è®¾ç½®uè¢«è®¿é—®
    // å¯¹uèƒ½åˆ°è¾¾çš„çš„åˆ†æ”¯è¿›è¡Œæšä¸¾
    for(int v = 0; v < n; v++){
        if(vis[v] == false && G[u][v] != INF){	// å¦‚æœvæœªè¢«è®¿é—®ä¸”uå¯åˆ°è¾¾ 
            DFS(v, depth + 1);		// è®¿é—®vï¼Œæ·±åº¦åŠ 1
        }
    }
}

void DFSTrave(){		// éå†å›¾
    for(int u = 0; u < n; u++){	// å¯¹æ¯ä¸ªé¡¶ç‚¹u
        if(vis[u] == false){	// å¦‚æœuæœªè¢«è®¿é—®
            DFS(u, 1);			// è®¿é—®uå’Œuæ‰€åœ¨çš„è¿é€šå—ï¼Œ1è¡¨ç¤ºåˆå§‹ä¸ºç¬¬ä¸€å±‚
        }
    }
}
```

ğŸ…±**é‚»æ¥è¡¨ç‰ˆæœ¬**

```cpp
vector<int> Adj[MAXV];
int n;
bool vis[MAXV] = {false};

void DFS(int n, int depth){
    vis[u] = true;
    for(int v = 0; v < Adj[u].size(); v++){
        if(vis[v] == false){
            DFS(v, depth + 1);
        }
    }
}

void DFSTrave(){
    for(int u = 0; u < n; u++){
        if(vis[u] == false)
            DFS(u, 1);
    }
}
```

### ä¾‹é¢˜[PAT A1034](https://pintia.cn/problem-sets/994805342720868352/problems/994805456881434624)

```cpp
#include<iostream>
#include<string>
#include<map>
using namespace std;

const int maxn = 2010;  // æ€»äººæ•°
const int INF = 1000000010; // æ— ç©·å¤§

map<int, string> intToString;   // ç¼–å·->å§“å
map<string, int> stringToInt;   // å§“å->ç¼–å·
map<string, int> Gang;          // head->äººæ•°

int G[maxn][maxn] = {0}, weight[maxn] = {0};   // é‚»æ¥çŸ©é˜µGï¼Œç‚¹æƒweight
int n, k, numPerson = 0;                    // è¾¹æ•°nï¼Œä¸‹é™kï¼Œæ€»äººæ•°numPerson
bool vis[maxn] = {false};

// DFSéå†å•ä¸ªè¿é€šå—ï¼ŒnowVisitä¸ºå½“å‰è®¿é—®çš„ç¼–å·
// headä¸ºå¤´ç›®ï¼ŒnumMemberä¸ºæˆå‘˜ç¼–å·ï¼ŒtotalValueä¸ºè¿é€šå—çš„æ€»è¾¹æƒ
void DFS(int nowVisit, int &head, int &numMember, int &totalValue){
    numMember++;                            // æˆå‘˜äººæ•°åŠ 1
    vis[nowVisit] = true;                   // å·²è®¿é—®
    if(weight[nowVisit] > weight[head]){    // å¦‚æœå½“å‰ç»“ç‚¹ç‚¹æƒå¤§äºheadçš„ç‚¹æƒï¼Œæ›´æ–°head
        head = nowVisit;
    }
    for(int v = 0; v < numPerson; v++){     // æšä¸¾æ‰€æœ‰äºº
        if(G[nowVisit][v] > 0){             // å¦‚æœä»å½“å‰ç»“ç‚¹èƒ½éƒ½è¾¾åˆ°v
            totalValue += G[nowVisit][v];   // è¿é€šå—çš„è¾¹æƒå¢åŠ è¯¥è¾¹æƒ
            G[nowVisit][v] = G[v][nowVisit] = 0;    // åˆ é™¤è¿™æ¡è¾¹ï¼Œé˜²æ­¢å›å¤´
            if(vis[v] == false){            // å¦‚æœvæœªè¢«è®¿é—®ï¼Œåˆ™é€’å½’è®¿é—®
                DFS(v, head, numMember, totalValue);
            }
        }
    }
}
// éå†æ•´ä¸ªå›¾ï¼Œè·å–æ¯ä¸ªè¿é€šå—çš„ä¿¡æ¯
void DFSTrave(){
    for(int i = 0; i < numPerson; i++){                     // æšä¸¾æ‰€æœ‰äºº
        if(vis[i] == false){                                // å¦‚æœiæ²¡æœ‰è¢«è®¿é—®
            int head = i, numMember = 0, totalValue = 0;    // å¤´ç›®ï¼Œæˆå‘˜æ•°ï¼Œæ€»è¾¹æƒ
            DFS(i, head, numMember, totalValue);            // éå†iæ‰€åœ¨çš„è¿é€šå—
            if(numMember > 2 && totalValue > k){            // æˆå‘˜äººæ•°å¤§äº2ä¸”è¾¹æƒå¤§äºk
                Gang[intToString[head]] = numMember;
            }
        }
    }
}

// è¿”å›å§“åstrçš„ç¼–å·
int change(string str){
    if(stringToInt.find(str) != stringToInt.end()){ // å¦‚æœstrå·²ç»å‡ºç°è¿‡
        return stringToInt[str];
    }else{
        stringToInt[str] = numPerson;               // strçš„ç¼–å·ä¸ºnumPerson
        intToString[numPerson] = str;               // numPersonå¯¹äºstr
        return numPerson++;                         // æ€»äººæ•°åŠ 1
    }
}

int main(){
    int w;
    string str1, str2;
    cin >> n >> k;
    for(int i = 0; i < n; i++){
        cin >> str1 >> str2 >> w;   // è¾“å…¥è¾¹çš„ä¸¤ä¸ªç«¯ç‚¹å’Œç‚¹æƒ
        int id1 = change(str1);     // å°†str1è½¬æ¢ä¸ºç¼–å·id1
        int id2 = change(str2);
        weight[id1] += w;           // id1çš„ç‚¹æƒåŠ w
        weight[id2] += w;
        G[id1][id2] += w;           // è¾¹id1->id2çš„è¾¹æƒå¢åŠ w
        G[id2][id1] += w;
    }
    DFSTrave();                     // éå†æ•´ä¸ªå›¾
    cout << Gang.size() << endl;
    map<string, int>::iterator it;
    for(it = Gang.begin(); it != Gang.end(); it++){
        cout << it->first << " " << it->second << endl;
    }
    return 0;
}
```

## å¹¿åº¦ä¼˜å…ˆéå†BFS

### BFSéå†å›¾

![Snipaste_2020-04-18_15-10-50](https://tvax2.sinaimg.cn/large/005tpOh1gy1gdxxun4notj30o806tgq7.jpg)

![Snipaste_2020-04-18_15-11-15](https://tva4.sinaimg.cn/large/005tpOh1gy1gdxxutnphlj30mb0outke.jpg)

### BFSçš„å…·ä½“å®ç°

å’ŒDFSä¸€æ ·ï¼Œä¸Šé¢çš„ä¾‹äº†æ˜¯å¯¹**å•ä¸ªè¿é€šå—**è¿›è¡Œçš„éå†æ“ä½œã€‚å¦‚æœè¦éå†æ•´ä¸ªå›¾ï¼Œåˆ™éœ€è¦å¯¹æ‰€æœ‰è¿é€šå—åˆ†åˆ«è¿›è¡Œéå†ã€‚ä½¿ç”¨BFSéå†å›¾çš„åŸºæœ¬æ€æƒ³æ˜¯**å»ºç«‹ä¸€ä¸ªé˜Ÿåˆ—ï¼Œå¹¶æŠŠåˆå§‹é¡¶ç‚¹åŠ å…¥é˜Ÿåˆ—ï¼Œæ­¤åæ¯æ¬¡éƒ½å–å‡ºé˜Ÿé¦–é¡¶ç‚¹è¿›è¡Œè®¿é—®ï¼Œå¹¶æŠŠä»è¯¥é¡¶ç‚¹å‡ºå‘å¯ä»¥åˆ°è¾¾çš„æœªæ›¾åŠ å…¥è¿‡é˜Ÿåˆ—ï¼ˆè€Œä¸æ˜¯æœªè®¿é—®ï¼‰çš„é¡¶ç‚¹å…¨éƒ¨åŠ å…¥é˜Ÿåˆ—ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©º**

- ğŸ…°é‚»æ¥çŸ©é˜µ

```cpp
int n, G[MAXV][MAXV];
bool inq[MAXV] = {false};
void BFS(int u){		// éå†uæ‰€åœ¨çš„è¿é€šå—
    queue<int> q;		// å®šä¹‰é˜Ÿåˆ—q
    q.push(u);			// å°†åˆå§‹ç‚¹uå…¥é˜Ÿ
    inq[u] = true;		// è®¾ç½®uå·²è¢«å…¥é˜Ÿ
    while(!q.empty()){	// åªè¦é˜Ÿåˆ—éç©º
        int u = q.front();	// å–å‡ºé˜Ÿé¦–å…ƒç´ 
        q.pop();			// é˜Ÿé¦–å‡ºé˜Ÿ
        for(int v = 0; v < n; v++){
            // å¦‚æœuçš„é‚»æ¥ç‚¹væœªæ›¾å…¥è¿‡é˜Ÿåˆ—
            if(inq[v] == false && G[u][v] != INF){
                q.push(v);		// å°†vå…¥é˜Ÿ
                inq[v] = true;	// æ ‡è®°vä¸ºå·²è¢«å…¥é˜Ÿ
            }
        }
    }
}

void BFSTrave(){
    for(int u = 0; u < n; u++){
        if(inq[u] == false){
            BFS(u);
        }
    }
}
```

- ğŸ…±é‚»æ¥è¡¨

```cpp
vector<int> Adj[MAXV];
int n;
bool inq[MAXV] = {false};

void BFS(int u){
    queue<int> q;
    q.push(u); 
    inq[u] = true;
    while(!q.empty()){
        int u = q.front();
        q.pop();
        for(int i = 0; i < Adj[u].size(); i++){
            int v = Adj[u][i];
            if(inq[v] != false){
                q.push(v);
                inq[v] = true;
            }
        }
    }
}

void BFSTrave(){
    for(int u = 0; u < n; u++){
        if(inq[u] == false){
            BFS(u);
        }
    }
}
```

**å¦‚æœéœ€è¦è¾“å‡ºè¿é€šå—å†…æ‰€æœ‰å…¶ä»–é¡¶ç‚¹çš„å±‚å·ï¼Œä¿®æ”¹å¦‚ä¸‹ï¼š**

```cpp
struct node{
    int v;		// é¡¶ç‚¹ç¼–å·
    int layer;	// é¡¶ç‚¹å±‚å·
};

vector<node> Adj[N];

void BFS(s){
    queue<node> q;
    node start;
    start.v = s;
    strat.layer = 0;
    q.push(start);
    inq[start.v] = true;
    while(!q.empty()){
        node topNode = q.front();
        q.pop();
        int u = topNode.v;
        for(int i = 0; i < Adj[u].size(); i++){
            node next = Adj[u][i];
            next.layer = topNode.layer + 1;
            if(inq[next.v] == false){
                q.push(next);
                inq[next.v] = true;
            }
        }
    }
}
```

### å®ä¾‹[PAT A1076](https://pintia.cn/problem-sets/994805342720868352/problems/994805392092020736)

![Snipaste_2020-04-18_16-45-29](https://tva4.sinaimg.cn/large/005tpOh1gy1gdy0kk550oj30o80avn3e.jpg)

![Snipaste_2020-04-18_16-45-48](https://tvax2.sinaimg.cn/large/005tpOh1gy1gdy0krmlqyj30n609mn3o.jpg)

```cpp
#include<cstdio>
#include<cstring>
#include<vector>
#include<queue>
using namespace std;
const int MAXV = 1010;
struct node{
    int id;
    int layer;
};

vector<node> Adj[MAXV];         // é‚»æ¥è¡¨
bool inq[MAXV] = {false};       // æ˜¯å¦å…¥é˜Ÿ

int BFS(int s, int L){          // Lä¸ºå±‚æ•°ä¸Šé™
    int numForward = 0;
    queue<node> q;
    node start;
    start.id = s;
    start.layer = 0;
    q.push(start);
    inq[start.id] = true;
    while(!q.empty()){
        node topNode = q.front();
        q.pop();
        int u = topNode.id;
        for(int i = 0; i < Adj[u].size(); i++){
            node next = Adj[u][i];
            next.layer = topNode.layer + 1;
            if(inq[next.id] == false && next.layer <= L){
                q.push(next);
                inq[next.id] = true;
                numForward++;
            }
        }
    }
    return numForward;
}

int main(){
    node user;
    int n, L, numFollow, idFollow;
    scanf("%d%d", &n, &L);
    for(int i = 1; i <= n; i++){
        user.id = i;
        scanf("%d", &numFollow);
        for(int j = 0; j < numFollow; j++){
            scanf("%d", &idFollow);
            Adj[idFollow].push_back(user);
        }
    }
    int numQuery, s;
    scanf("%d", &numQuery);
    for(int i = 0; i < numQuery; i++){
        memset(inq, false, sizeof(inq));
        scanf("%d", &s);
        int numFollow = BFS(s, L);
        printf("%d\n", numFollow);
    }
    return 0;
}
```

